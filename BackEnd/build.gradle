plugins {
	id 'java'
	id 'org.springframework.boot' version '3.5.0'
	id 'io.spring.dependency-management' version '1.1.7'
}

group = 'com.minePing'
version = '0.0.1-SNAPSHOT'

java {
	toolchain {
		languageVersion = JavaLanguageVersion.of(17)
	}
}

configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
}

repositories {
	mavenCentral()
}

dependencies {
	// ğŸ”¹ Spring Boot ì£¼ìš” ì˜ì¡´ì„±
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa' // JPA (Hibernate ê¸°ë°˜) ì‚¬ìš©ì„ ìœ„í•œ ìŠ¤íƒ€í„°
	implementation 'org.springframework.boot:spring-boot-starter-web' // ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ (MVC, REST ë“±) ê°œë°œì„ ìœ„í•œ ìŠ¤íƒ€í„°
	implementation 'org.springframework.boot:spring-boot-starter-validation' // Bean Validation ì§€ì›

	// ğŸ”¹ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨
	implementation 'mysql:mysql-connector-java:8.0.32' // MySQL ì—°ê²°ì„ ìœ„í•œ JDBC ë“œë¼ì´ë²„
	runtimeOnly 'com.h2database:h2' // ê°œë°œ/í…ŒìŠ¤íŠ¸ìš© ì¸ë©”ëª¨ë¦¬ H2 ë°ì´í„°ë² ì´ìŠ¤

	// ğŸ”¹ Lombok: Getter, Setter ë“± ì½”ë“œ ìë™ ìƒì„±ì„ ìœ„í•œ ë„êµ¬
	compileOnly 'org.projectlombok:lombok' // ì»´íŒŒì¼ ì‹œì—ë§Œ ì‚¬ìš©ë˜ëŠ” Lombok ë¼ì´ë¸ŒëŸ¬ë¦¬
	annotationProcessor 'org.projectlombok:lombok' // Lombok ì• ë…¸í…Œì´ì…˜ ì²˜ë¦¬ê¸° (ì½”ë“œ ìƒì„±)

	// ğŸ”¹ MapStruct: DTO â†” Entity ë³€í™˜ìš© ë§¤í•‘ ë¼ì´ë¸ŒëŸ¬ë¦¬
	implementation 'org.mapstruct:mapstruct:1.5.5.Final' // MapStruct ë§¤í•‘ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
	annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final' // MapStruct êµ¬í˜„ í´ë˜ìŠ¤ ìƒì„±ìš© ì• ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ

	// ğŸ”¹ ê°œë°œ í¸ì˜ ë„êµ¬
	developmentOnly 'org.springframework.boot:spring-boot-devtools' // ìë™ ë¦¬ìŠ¤íƒ€íŠ¸ ë° ë¼ì´ë¸Œ ë¦¬ë¡œë”© ì§€ì›

	// ğŸ”¹ í…ŒìŠ¤íŠ¸ ê´€ë ¨ ì˜ì¡´ì„±
	testImplementation 'org.springframework.boot:spring-boot-starter-test' // JUnit, Mockito ë“± í¬í•¨ëœ í…ŒìŠ¤íŠ¸ìš© ìŠ¤íƒ€í„°
	testRuntimeOnly 'org.junit.platform:junit-platform-launcher' // JUnit Platform ëŸ°íƒ€ì„ ì‹¤í–‰ì„ ìœ„í•œ ì˜ì¡´ì„±

	implementation 'org.springframework.boot:spring-boot-starter-security'

	//ì´ë¯¸ì§€ API
	implementation 'org.reactivestreams:reactive-streams:1.0.3'

	//jwtë¡œê·¸ì¸ ê´€ë ¨
	implementation 'io.jsonwebtoken:jjwt-api:0.11.5'
	runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.11.5'
	runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.11.5'

	implementation 'org.springframework.boot:spring-boot-starter-security'

	//oauth2
	implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'

	//s3
	implementation 'com.amazonaws:aws-java-sdk-s3:1.12.656'
	//Spring Bootì—ì„œ ë©”ì¼ ì „ì†¡ ê¸°ëŠ¥ì„ ê°„í¸í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡
	//í•„ìš”í•œ ì˜ì¡´ì„±ë“¤ì„ ë¬¶ì–´ì„œ ì œê³µí•˜ëŠ” ìŠ¤íƒ€í„° íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤.
	implementation 'org.springframework.boot:spring-boot-starter-mail'
	//ë©”ì¼í˜•ì‹ì„ htmlë¡œ ì‰½ê²Œ ì‘ì„±í•˜ê¸°ìœ„í•œ í…œí”Œë¦¿ì—”ì§„
	implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
	//redis
	implementation 'org.springframework.boot:spring-boot-starter-data-redis'
}

tasks.withType(JavaCompile).configureEach {
    options.compilerArgs += ['-parameters']

    // Lombokê³¼ MapStruct ì• ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ ìˆœì„œ ì„¤ì •
    options.annotationProcessorPath = configurations.annotationProcessor
    options.compilerArgs += [
        '-Amapstruct.defaultComponentModel=spring',
        '-Amapstruct.unmappedTargetPolicy=IGNORE'
    ]
}

tasks.named('test') {
	useJUnitPlatform()
}
